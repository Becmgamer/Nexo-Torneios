<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Torneios Nexus Studios</title>
<style>
  body { background: #0D0D0D; color: #FFF; font-family: Arial, sans-serif; text-align: center; margin:0; padding:0;}
  h1 { color: #00FFFF; text-shadow: 0 0 10px #39FF14;}
  button { background: #39FF14; color: #0D0D0D; padding: 12px 24px; margin: 10px; border: none; font-size: 16px; cursor:pointer; border-radius:8px; transition:0.3s;}
  button:hover { background:#00FFFF; color:#0D0D0D;}
  .torneio { border: 2px solid #00FFFF; padding: 20px; margin:20px; border-radius:10px;}
</style>
</head>
<body>

<h1>Torneios Nexus Studios</h1>

<div id="torneios-container"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
  // üîπ CONFIGURA√á√ÉO DO FIREBASE
  const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "SEU_AUTH_DOMAIN",
    projectId: "SEU_PROJECT_ID",
    storageBucket: "SEU_STORAGE_BUCKET",
    messagingSenderId: "SEU_MSG_SENDER",
    appId: "SEU_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const auth = firebase.auth();

  // üîπ LOGIN AUTOM√ÅTICO
  auth.onAuthStateChanged(user => {
    if(user) {
      console.log("Usu√°rio logado:", user.email);
      carregarTorneios();
    } else {
      // se n√£o estiver logado, login an√¥nimo tempor√°rio
      auth.signInAnonymously().catch(err => console.log(err));
    }
  });

  // üîπ CARREGAR TORNEIOS
  function carregarTorneios(){
    const container = document.getElementById('torneios-container');
    container.innerHTML = '';
    db.collection('torneios').get().then(snapshot => {
      snapshot.forEach(doc => {
        const torneio = doc.data();
        const div = document.createElement('div');
        div.classList.add('torneio');
        div.innerHTML = `
          <h2>${torneio.nome}</h2>
          <p>Taxa de inscri√ß√£o: R$${torneio.taxa.toFixed(2)}</p>
          <p>Limite: ${torneio.limite} participantes</p>
          <button onclick="inscrever('${doc.id}', '${torneio.nome}', ${torneio.limite})">Inscrever-se</button>
        `;
        container.appendChild(div);
      });
    });
  }

  // üîπ FUN√á√ÉO INSCRI√á√ÉO
  function inscrever(torneioId, torneioNome, limite){
    const user = auth.currentUser;
    if(!user) { alert('Erro: usu√°rio n√£o encontrado'); return; }

    // checar inscritos atuais
    db.collection('torneios').doc(torneioId).collection('inscritos').get().then(snap => {
      if(snap.size >= limite){
        alert('Inscri√ß√µes encerradas!');
        return;
      }
      const nome = prompt("Digite seu nome:");
      const username = prompt("Digite seu username:");
      const email = prompt("Digite seu e-mail:");

      db.collection('torneios').doc(torneioId).collection('inscritos').add({
        nome, username, email, status:false, pix:false
      }).then(() => {
        alert(`Voc√™ foi inscrito com sucesso no torneio "${torneioNome}"! Aguarde confirma√ß√£o do Pix.`);
      });
    });
  }
</script>
</body>
</html>
