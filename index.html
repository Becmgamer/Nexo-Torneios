<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grix Studios Torneios</title>
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f0f0f;
  color:white;
  text-align:center;
}
h1{
  margin-top:20px;
}
.container{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:40px;
}
.card{
  background:#1a1a1a;
  padding:20px;
  margin:20px;
  width:300px;
  border-radius:10px;
  border:1px solid #00ff88;
  box-shadow:0 0 15px rgba(0,255,136,0.3);
}
button{
  padding:10px 20px;
  margin:5px;
  border:none;
  border-radius:5px;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}
.primary{
  background:#00ff88;
  color:black;
}
.primary:hover{
  background:#00ccff;
  color:white;
  box-shadow:0 0 10px #00ccff;
}
.secondary{
  background:#00ccff;
  color:black;
}
.secondary:hover{
  background:#00ff88;
  box-shadow:0 0 10px #00ff88;
}
.count{
  font-size:14px;
  margin-bottom:10px;
}
</style>
</head>
<body>

<h1>Grix Studios Torneios</h1>

<div class="container" id="torneiosArea">

  <!-- Brawl Stars -->
  <div class="card" id="brawlCard">
    <img src="https://i.postimg.cc/vBDwTGw1/cropped.webp" width="150"><br><br>
    <h3>Brawl Stars Cup GS</h3>
    <p><b>Data de entrada:</b><br>1Âº de marÃ§o Ã s 16:00</p>
    <p><b>Final e 3Âº Lugar:</b><br>SerÃ¡ definido de acordo com a possibilidade dos finalistas</p>
    <p><b>Taxa de entrada:</b> R$0,50</p>
    <p><b>PrÃªmios:</b> 1Âº R$10, 2Âº R$3, 3Âº R$1</p>
    <p class="count" id="brawlCount">Vagas ocupadas: 0</p>
    <button class="primary" onclick="inscrever('Brawl Stars')">Pagar via Pix</button>
    <button class="secondary" onclick="pagarPessoal('Brawl Stars')">Pagar pessoalmente</button>
  </div>

  <!-- Clash Royale -->
  <div class="card" id="clashCard">
    <img src="https://i.postimg.cc/9MTkJZy1/images.jpg" width="150"><br><br> <!-- Troque pelo link correto -->
    <h3>Clash Royale Cup GS</h3>
    <p><b>Data de entrada:</b><br>7 de marÃ§o Ã s 16:00</p>
    <p><b>Formato:</b><br>Fase de grupos e eliminatÃ³rias, final e 3Âº lugar no mesmo dia</p>
    <p><b>Taxa de entrada:</b> R$1,00</p>
    <p><b>PrÃªmios:</b> 1Âº R$5, 2Âº R$3, 3Âº R$1 + trofÃ©u fÃ­sico personalizado</p>
    <p class="count" id="clashCount">Vagas ocupadas: 0</p>
    <button class="primary" onclick="inscrever('Clash Royale')">Pagar via Pix</button>
    <button class="secondary" onclick="pagarPessoal('Clash Royale')">Pagar pessoalmente</button>
  </div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getDatabase, ref, set, get, push } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

// Config Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDj5-aBr2n_wg80HswcaIOjetm7DtxILSI",
  authDomain: "nexostudios-site-e9458.firebaseapp.com",
  databaseURL: "https://nexostudios-site-e9458-default-rtdb.firebaseio.com",
  projectId: "nexostudios-site-e9458",
  storageBucket: "nexostudios-site-e9458.firebasestorage.app",
  messagingSenderId: "247851109985",
  appId: "1:247851109985:web:1b8903891240c55a376420"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

const limites = { "Brawl Stars":6, "Clash Royale":6 };
const caminhos = { "Brawl Stars":"torneio/Brawl Stars/inscritos", "Clash Royale":"torneio/Clash Royale/inscritos" };

function atualizarContagem(game){
  get(ref(db, caminhos[game])).then(snapshot=>{
    const count = snapshot.exists() ? Object.keys(snapshot.val()).length : 0;
    document.getElementById(game==='Brawl Stars'?'brawlCount':'clashCount').innerText = `Vagas ocupadas: ${count}`;
  });
}

// AlteraÃ§Ã£o dos botÃµes: apenas mensagem informativa
function inscrever(game){
  alert(`ðŸ“Œ Copie o e-mail para Pix: bernardmachado14@gmail.com e FaÃ§a a transferÃªncia e espere a confirmaÃ§Ã£o em atÃ© 24 horas.`);
  if(confirm("Deseja voltar para a aba inicial?")){
    window.location.href = "https://site.google.com/viu/grixstudios/inicio";
  }
}

function pagarPessoal(game){
  alert("Sua mensagem foi enviada com sucesso. Espere atÃ© 24 horas para confirmaÃ§Ã£o.");
  if(confirm("Deseja voltar para a aba inicial?")){
    window.location.href = "https://site.google.com/viu/grixstudios/inicio";
  }
}

onAuthStateChanged(auth,user=>{
  if(user){
    atualizarContagem("Brawl Stars");
    atualizarContagem("Clash Royale");
  }
});
</script>
</body>
</html>
